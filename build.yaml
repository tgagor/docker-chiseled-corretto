---
prefix: tgagor
maintainer: Tomasz GÄ…gor <https://gagor.pro>

# labels:
#   org.opencontainers.image.vendor: My Corp
#   # https://spdx.github.io/spdx-spec/v2.3/SPDX-license-expressions/
#   org.opencontainers.image.licenses: GPL-2.0-only
#   org.opencontainers.image.url: https://my.url
#   org.opencontainers.image.documentation: https://my.url/docs
#   org.opencontainers.image.title: My Corp's Docker base images
#   org.opencontainers.image.description: |
#     This is a longer description of what this image is capable of.

#     Let try templates here.
#     Image test-case-2d on Alpine Linux {{ .alpine }}

images:
  base-alpine:
    dockerfile: base/alpine/Dockerfile
    variables:
      alpine:
        - "3.21"
    args:
      BASE_IMAGE: "alpine:{{ .alpine }}"
    tags:
      - base:{{ .tag }}-alpine{{ .alpine }}
      - base:alpine{{ .alpine }}
      - base:{{ .tag }}-alpine{{ .alpine | splitList "." | first }}
      - base:alpine{{ .alpine | splitList "." | first }}
      - base:{{ .tag }}-alpine
      - base:{{ .tag }}
      - base:alpine
      - base

  base-ubuntu:
    dockerfile: base/ubuntu/Dockerfile
    variables:
      ubuntu:
        - "24.04"
    args:
      BASE_IMAGE: "ubuntu:{{ .ubuntu }}"
    tags:
      - base:{{ .tag }}-ubuntu{{ .ubuntu }}
      - base:ubuntu{{ .ubuntu }}
      - base:{{ .tag }}-ubuntu
      - base:{{ .tag }}
      - base:ubuntu
      - base

  jdk-alpine:
    dockerfile: jdk/alpine/Dockerfile
    variables:
      alpine:
        - "3.21"
      java:
        # - 11
        - 17
        - 21
    args:
      BASE_IMAGE: "{{ if .registry }}{{ .registry }}/{{ end }}{{ if .prefix }}{{ .prefix }}/{{ end }}base:alpine{{ .alpine }}"
    tags:
      - jdk:{{ .tag }}-{{ .java }}-alpine{{ .alpine }}
      - jdk:{{ .java }}-alpine{{ .alpine }}
      - jdk:{{ .java }}-alpine{{ .alpine | splitList "." | first }}
      - jdk:{{ .tag }}-{{ .java }}-alpine
      - jdk:{{ .tag }}-{{ .java }}
      - jdk:{{ .java }}-alpine
      - jdk:{{ .tag }}
      - jdk

  jdk-ubuntu:
    dockerfile: jdk/ubuntu/Dockerfile
    variables:
      ubuntu:
        - "24.04"
      java:
        # - 11
        - 17
        - 21
    args:
      BASE_IMAGE: "{{ if .registry }}{{ .registry }}/{{ end }}{{ if .prefix }}{{ .prefix }}/{{ end }}base:ubuntu{{ .ubuntu }}"
    tags:
      - jdk:{{ .tag }}-{{ .java }}-ubuntu{{ .ubuntu }}
      - jdk:{{ .java }}-ubuntu{{ .ubuntu }}
      - jdk:{{ .tag }}-{{ .java }}-ubuntu
      - jdk:{{ .tag }}-{{ .java }}
      - jdk:{{ .java }}-ubuntu
      - jdk:{{ .java }}
      - jdk:{{ .tag }}
      - jdk

  jre-alpine:
    dockerfile: jre/alpine/Dockerfile.tpl
    variables:
      alpine:
        - "3.21"
      java:
        - 17
        - 21
    tags:
      - jre:{{ .tag }}-{{ .java }}-alpine{{ .alpine }}
      - jre:{{ .java }}-alpine{{ .alpine }}
      - jre:{{ .java }}-alpine{{ .alpine | splitList "." | first }}
      - jre:{{ .tag }}-{{ .java }}-alpine
      - jre:{{ .tag }}-{{ .java }}
      - jre:{{ .java }}-alpine
      - jre:{{ .java }}
      - jre:{{ .tag }}
      - jre

  jre-ubuntu:
    dockerfile: jre/ubuntu/Dockerfile.tpl
    variables:
      ubuntu:
        - "24.04"
      java:
        - 17
        - 21
    tags:
      - jre:{{ .tag }}-{{ .java }}-ubuntu{{ .ubuntu }}
      - jre:{{ .java }}-ubuntu{{ .ubuntu }}
      - jre:{{ .tag }}-{{ .java }}-ubuntu
      - jre:{{ .tag }}-{{ .java }}
      - jre:{{ .java }}-ubuntu
      - jre:{{ .java }}
      - jre:{{ .tag }}
      - jre

  jre-chiselled:
    dockerfile: jre/chiselled-ubuntu/Dockerfile.tpl
    variables:
      ubuntu:
        - "24.04"
      java:
        - 17
        - 21
    args:
      USER: app
      GROUP: app
      UID: 1001
      GID: 1001
    tags:
      - jre:{{ .tag }}-{{ .java }}-chiselled-ubuntu{{ .ubuntu }}
      - jre:{{ .java }}-chiselled-ubuntu{{ .ubuntu }}
      - jre:{{ .tag }}-{{ .java }}-chiselled-ubuntu
      - jre:{{ .tag }}-{{ .java }}-chiselled
      - jre:chiselled-{{ .java }}-ubuntu
      - jre:chiselled-{{ .java }}
      - jre:{{ .tag }}-chiselled
      - jre:chiselled
